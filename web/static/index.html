<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OCamlot - Market Data Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>OCamlot Trading System</h1>
            <p class="subtitle">Real-time Market Data Dashboard</p>
            <div class="header-controls">
                <div class="connection-indicator">
                    <span class="label">Status:</span>
                    <span id="connection-status" class="status disconnected">Disconnected</span>
                </div>
            </div>
        </header>

        <nav class="controls">
            <div class="control-group">
                <h3>Simulation Control</h3>
                <button id="start-simulation" class="btn btn-primary">Start Simulation</button>
                <button id="stop-simulation" class="btn btn-secondary">Stop Simulation</button>
            </div>
            
            <div class="control-group">
                <h3>Display Options</h3>
                <label class="checkbox-label">
                    <input type="checkbox" id="auto-scroll-toggle" checked>
                    Auto-scroll to latest
                </label>
            </div>
        </nav>

        <main class="main-content">
            <section class="market-data-section">
                <div class="section-header">
                    <h2>Live Market Data</h2>
                    <div class="data-stats">
                        <span id="data-count" class="stat">0 ticks received</span>
                        <span id="update-rate" class="stat">0 updates/sec</span>
                    </div>
                </div>
                
                <div id="market-data-container" class="data-container">
                    <table class="market-data-table">
                        <thead>
                            <tr>
                                <th class="symbol-col">Symbol</th>
                                <th class="price-col">Bid</th>
                                <th class="price-col">Ask</th>
                                <th class="price-col">Last</th>
                                <th class="volume-col">Volume</th>
                                <th class="time-col">Time</th>
                            </tr>
                        </thead>
                        <tbody id="market-data-table-body">
                            <!-- Market data rows will be inserted here by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <section class="info-section">
                <div class="info-card">
                    <h3>About OCamlot</h3>
                    <p>
                        This dashboard displays real-time synthetic market data generated by the OCamlot trading system.
                        The same OCaml code that generates market data on the backend is compiled to JavaScript 
                        and runs in your browser, ensuring identical behavior across the entire system.
                    </p>
                    <ul class="feature-list">
                        <li>✓ Type-safe market data generation</li>
                        <li>✓ Real-time WebSocket streaming</li>
                        <li>✓ OCaml-to-JavaScript compilation</li>
                        <li>✓ Unified codebase for backend and frontend</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h3>System Architecture</h3>
                    <p>
                        The OCamlot system demonstrates the power of OCaml's type system for financial applications:
                    </p>
                    <ul class="tech-list">
                        <li><strong>Backend:</strong> Native OCaml with Dream web framework</li>
                        <li><strong>Frontend:</strong> js_of_ocaml compilation</li>
                        <li><strong>Messaging:</strong> Pure OCaml NATS client</li>
                        <li><strong>Types:</strong> Shared type definitions across stack</li>
                    </ul>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>&copy; 2024 OCamlot Trading System - Built with OCaml</p>
        </footer>
    </div>

    <!-- Load the compiled OCaml JavaScript -->
    <script src="main.js"></script>
</body>
</html>